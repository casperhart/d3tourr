<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="detourr">
<title>Adding a new display method and widget to {detourr} • detourr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Adding a new display method and widget to {detourr}">
<meta property="og:description" content="detourr">
<meta property="og:image" content="https://casperhart.github.io/detourr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">detourr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../../articles/adding_a_new_widget/adding_a_new_widget.html">Adding a new display method to detourr</a>
    <a class="dropdown-item" href="../../articles/show_scatter_interactivity/show_scatter_interactivity.html">Interacting with show_scatter</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/casperhart/detourr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="detourr_development_setup_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>Adding a new display method and widget to {detourr}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/casperhart/detourr/blob/HEAD/vignettes/development_setup/detourr_development_setup.Rmd" class="external-link"><code>vignettes/development_setup/detourr_development_setup.Rmd</code></a></small>
      <div class="d-none name"><code>detourr_development_setup.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="development-setup">Development setup<a class="anchor" aria-label="anchor" href="#development-setup"></a>
</h2>
<p>Now that our widget is up and running we can make changes to our TS code, rebuild the package, reload the R console, and view the changes by running <code>animate_tour</code> again. This is quite slow, and doing it repetitively makes for a poor development experience, so in this section we will detail some additional configuration you can use to view changes to your widget in real time.</p>
<p>This is done using <code>webpack-dev-server</code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">yarn</span> run start-dev</span></code></pre></div>
<p>This starts a Webpack development server on <code>localhost:9000</code>, and opens a UI in the browser with links to each of the widgets in the <code>detourr</code> package, shown below:</p>
<p><img src="images/dev_server_menu.png" width="100%"></p>
<p>Clicking on any of these links will show the development widget in action, for example, clicking on <code>show_scatter_3d</code> gives the below:</p>
<p><img src="images/dev_server_show_scatter_3d.png" width="100%"></p>
<p>In this section, we’ll create our own basic widget, and make it accessible via <code>yarn run start-dev</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Display Hello World Example</span>
<span class="co">#'</span>
<span class="co">#' Note that these comments will be converted in to documentation by the</span>
<span class="co">#' {roxygen2} package when we run `yarn run build`. As such, the `@export`</span>
<span class="co">#' below is necessary, or else this function won't be made available to the</span>
<span class="co">#' user</span>
<span class="co">#'</span>
<span class="co">#' @export</span>
<span class="va">show_hello_world</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">init</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">col_spec</span>, <span class="va">tour_dim</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">data_cols</span> <span class="op">&lt;-</span> <span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/eval_select.html" class="external-link">eval_select</a></span><span class="op">(</span><span class="va">col_spec</span>, <span class="va">data</span><span class="op">)</span>
    <span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data_cols</span><span class="op">)</span>
    <span class="va">widget</span> <span class="op">&lt;-</span> <span class="st">"hello_world"</span>

    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
      <span class="st">"plot"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
        labels <span class="op">=</span> <span class="va">labels</span>
      <span class="op">)</span>,
      <span class="st">"widget"</span> <span class="op">=</span> <span class="va">widget</span>,
      <span class="st">"mapping"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"init"</span> <span class="op">=</span> <span class="va">init</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Before we can run the above in the browser, we’ll need to create two more files:</p>
<ul>
<li>
<code>dev/hello_world/sample_data.json</code>: a file containing sample data that our widget will use.</li>
<li>
<code>dev/hello_world/index.html</code> will contain logic to import the class we defined above, load the sample data, and render our widget.</li>
</ul>
<p class="codeblock-label">
dev/hello_world/sample_data.json
</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="st">"hello sample data"</span></span></code></pre></div>
<script type="text/javascript">
"hello sample data"
</script><p class="codeblock-label">
dev/hello_world/static/index.html
</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&lt;!</span>DOCTYPE html<span class="op">&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="op">&lt;</span>html lang<span class="op">=</span><span class="st">"en"</span><span class="op">&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="op">&lt;</span>head<span class="op">&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="op">&lt;</span>title<span class="op">&gt;</span>Hello World&lt;/title<span class="op">&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"hello_world.bundle.js"</span><span class="op">&gt;</span>&lt;/script<span class="op">&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  &lt;/head<span class="op">&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"plot"</span><span class="op">&gt;</span>&lt;/div<span class="op">&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="op">&lt;</span>script<span class="op">&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>      <span class="at">fetch</span>(<span class="st">"./sample_data.json"</span>).<span class="at">then</span>(<span class="kw">function</span> (response) <span class="op">{</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>        <span class="co">// run hello_world using sample data</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>        <span class="va">response</span>.<span class="at">json</span>().<span class="at">then</span>(<span class="kw">function</span> (data) <span class="op">{</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>          <span class="kw">let</span> el <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">"plot"</span>)<span class="op">;</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>          <span class="kw">let</span> display <span class="op">=</span> <span class="kw">new</span> window[<span class="st">'hello_world/hello_world'</span>].<span class="at">HelloWorld</span>(el<span class="op">,</span> <span class="dv">300</span><span class="op">,</span> <span class="dv">300</span>)<span class="op">;</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>          <span class="va">display</span>.<span class="at">renderValue</span>(data)<span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>          <span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">"resize"</span><span class="op">,</span> (event) <span class="kw">=&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>            <span class="va">display</span>.<span class="at">resize</span>(<span class="va">window</span>.<span class="at">innerWidth</span> <span class="op">,</span> <span class="va">window</span>.<span class="at">innerHeight</span>)</span>
<span id="cb4-18"><a href="#cb4-18"></a>          )<span class="op">;</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>        <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>      <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb4-21"><a href="#cb4-21"></a>    &lt;/script<span class="op">&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>  &lt;/body<span class="op">&gt;</span></span>
<span id="cb4-23"><a href="#cb4-23"></a>&lt;/html<span class="op">&gt;</span></span></code></pre></div>
<p>With the above files in place, the next thing we need to do is tell Webpack that we want to bundle our <code>hello_world</code> example along with the existing widgets. This bundling is configured via <code>webpack/dev.config.ts</code>, and there are two changes we need to make to this file:</p>
<ol style="list-style-type: decimal">
<li>adding an item under <code>entry</code> to tell webpack where our TS code lives</li>
</ol>
<p class="codeblock-label">
webpack/dev.config.ts
</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb5-1"><a href="#cb5-1"></a>  entry: {</span>
<span id="cb5-2"><a href="#cb5-2"></a>    "show_scatter_2d/show_scatter_2d":</span>
<span id="cb5-3"><a href="#cb5-3"></a>      "./srcts/show_scatter_2d/index.ts",</span>
<span id="cb5-4"><a href="#cb5-4"></a>    "show_scatter_3d/show_scatter_3d":</span>
<span id="cb5-5"><a href="#cb5-5"></a>      "./srcts/show_scatter_3d/index.ts",</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="va">+   "hello_world/hello_world": "./srcts/hello_world/index.ts",</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  },</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>adding a new pattern under <code>CopyPlugin</code> to tell webpack where to find our <code>index.html</code> and <code>sample_data.json</code> files</li>
</ol>
<p class="codeblock-label">
webpack/dev.config.ts
</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb6-1"><a href="#cb6-1"></a>  plugins: [</span>
<span id="cb6-2"><a href="#cb6-2"></a>      new CopyPlugin({</span>
<span id="cb6-3"><a href="#cb6-3"></a>        patterns: [</span>
<span id="cb6-4"><a href="#cb6-4"></a>          ...</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="va">+         { from: "dev/hello_world/static/", to: "hello_world" },</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>        ],</span>
<span id="cb6-7"><a href="#cb6-7"></a>      }),</span>
<span id="cb6-8"><a href="#cb6-8"></a>    ],</span></code></pre></div>
<p>Lastly, we need to add a menu item so that we can navigate to our widget when the dev server is started. To do this, we modify <code>dev/index.ts</code> by adding a line to <code>dev/index.html</code> like so:</p>
<p class="codeblock-label">
dev/index.html
</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb7-1"><a href="#cb7-1"></a><span class="st">&lt;!DOCTYPE html&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">&lt;head&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>   &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;</span>
<span id="cb7-5"><a href="#cb7-5"></a>   &lt;title&gt;Directory Tree&lt;/title&gt;</span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">&lt;/head&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>  &lt;h1&gt;Development Widgets&lt;/h1&gt;&lt;p&gt;</span>
<span id="cb7-9"><a href="#cb7-9"></a>  &lt;a href="./show_scatter_2d/"&gt;show_scatter_2d&lt;/a&gt;&lt;br&gt;</span>
<span id="cb7-10"><a href="#cb7-10"></a>  &lt;a href="./show_scatter_3d/"&gt;show_scatter_3d&lt;/a&gt;&lt;br&gt;</span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="va">+ &lt;a href="./hello_world/"&gt;hello_world&lt;/a&gt;&lt;br&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  &lt;br&gt;&lt;br&gt;</span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="st">&lt;/html&gt;</span></span></code></pre></div>
<p>Now, when we start our dev server using <code>yarn run start-dev</code>, we see our new menu option:</p>
<p><img src="images/dev_server_hello_world_menu.png" width="100%"></p>
<p>And we can navigate to our widget!</p>
<p><img src="images/dev_server_hello_world.png" width="100%"></p>
<p>With the above all set up, we can get started developing our widget in Typescript. The development server will watch our TS code for changes, and update immediately when those changes are saved. If our code is invalid, the dev server will tell us exactly where the issue is so that we can fix it. We can modify the contents of our <code>sample_data.json</code> file with the data we expect to receive from R, and then modify the TS code to consume that data.</p>
</div>
<div class="section level2">
<h2 id="creating-r-and-javascript-bindings">Creating R and javascript bindings<a class="anchor" aria-label="anchor" href="#creating-r-and-javascript-bindings"></a>
</h2>
<p>Once we’ve got a widget up and running using the dev server, we will need to integrate it in to the R package with {HTMLWidgets}. The steps in this section are very similar to , but there are some additional steps required for us to bundle our widget dependencies.</p>
<pre><code>❯ ls -l inst/htmlwidgets/lib
.rw-r--r--  41k chart 30 Jan 13:44 show_scatter_2d.bundle.js
.rw-r--r--  40k chart 30 Jan 13:44 show_scatter_3d.bundle.js
.rw-r--r--  789 chart 30 Jan 13:44 hello_world.bundle.js
.rw-r--r-- 1.2k chart 12 Dec  2021 runtime.bundle.js
.rw-r--r-- 622k chart  7 Jan 14:05 three.bundle.js
.rw-r--r--   92 chart 12 Dec  2021 three.bundle.js.LICENSE.txt</code></pre>
<p>The files that are important for us are <code>runtime.bundle.js</code> and <code>hello_world.bundle.js</code>. The <code>hello_world</code> bundle consists of our code, while <code>runtime.bundle.js</code> contains code for the webpack runtime, which is required for our widget to work. Later on, if our widget uses third party libraries as dependencies, they will be bundled separately and added to this folder, as is the case for <code>three.bundle.js</code>.</p>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>More information on this file can be found in <a href="https://www.htmlwidgets.org/develop_intro.html" class="external-link">the htmlwidgets documentation</a></p>
</div>
<div class="section level3">
<h3 id="r-binding-and-display-method">R binding and display method<a class="anchor" aria-label="anchor" href="#r-binding-and-display-method"></a>
</h3>
<p>When make a call to <code>animate_tour</code>, we specify the <code>data</code>, <code>tour_path</code>, and <code>show_method</code> arguments. Technically speaking, the R binding we need (as detailed in <a href="https://www.htmlwidgets.org/develop_intro.html" class="external-link">the htmlwidgets documentation</a>) is already implemented in the in the <code>animate_tour</code> function. To get our widget to show, however, we will need to implement a new display method which provides the necessary context to <code>animate_tour</code> for our widget to be called.</p>
<p class="codeblock-label">
R/show_hello_world.R
</p>
</div>
<div class="section level3">
<h3 id="javascript-binding">Javascript binding<a class="anchor" aria-label="anchor" href="#javascript-binding"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="some-useful-tips">Some useful tips<a class="anchor" aria-label="anchor" href="#some-useful-tips"></a>
</h2>
<p>Below are some useful tips to make things a little easier when developing widgets.</p>
<div class="section level3">
<h3 id="generating-sample_data-json">Generating <code>sample_data.json</code><a class="anchor" aria-label="anchor" href="#generating-sample_data-json"></a>
</h3>
<p>Rather than creating and modifying <code>sample_data.json</code> by hand for your development widget, it’s best to add some code to <code>scripts/generate_sample_data.R</code> to generate this file for you. For example:</p>
<p class="codeblock-label">
scripts/generate_sample_data.R
</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>

<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">animate_tour</span><span class="op">(</span>
  <span class="fu">tourr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/tourr/man/Flea-measurements.html" class="external-link">flea</a></span>,
  display <span class="op">=</span> <span class="fu">show_hello_world</span><span class="op">(</span><span class="op">)</span>,
  tour_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tourr/man/grand_tour.html" class="external-link">grand_tour</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span>
  <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">p</span><span class="op">$</span><span class="va">x</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, null <span class="op">=</span> <span class="st">"null"</span><span class="op">)</span>,
  <span class="st">"../dev/hello_world/static/sample_data.json"</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Casper Hart, Earo Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
