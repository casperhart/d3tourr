var scatter_widget;(()=>{"use strict";var t,e={976:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(645),r=n.n(i)()((function(t){return t[1]}));r.push([t.id,"button {\n  background-color: transparent;\n  position: absolute;\n  color: rgb(0, 0, 0);\n  text-align: center;\n  width: 30px;\n  height: 30px;\n  border-color: transparent;\n}\n\nbutton:hover {\n  color: rgb(56, 56, 56);\n}\n\nbutton.playPauseButton {\n  top: 10px;\n  left: 10px;\n}\n\nbutton.resetButton {\n  top: 45px;\n  left: 10px;\n}\n\n.scatterWidgetContainer {\n  position: relative;\n}\n\n.scatterWidgetCanvas {\n  position: absolute;\n}\n",""]);const o=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);i&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},252:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var i=n(379),r=n.n(i),o=n(795),a=n.n(o),s=n(569),c=n.n(s),u=n(565),l=n.n(u),d=n(216),h=n.n(d),f=n(589),p=n.n(f),m=n(976),v={};v.styleTagTransform=p(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),r()(m.Z,v);const g=m.Z&&m.Z.locals?m.Z.locals:void 0},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],s=0;s<t.length;s++){var c=t[s],u=i.base?c[0]+i.base:c[0],l=o[u]||0,d="".concat(u," ").concat(l);o[u]=l+1;var h=n(d),f={css:c[1],media:c[2],sourceMap:c[3]};-1!==h?(e[h].references++,e[h].updater(f)):e.push({identifier:d,updater:r(f,i),references:1}),a.push(d)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var c=i(t,r),u=0;u<o.length;u++){var l=n(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},28:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resetIcon=e.playIcon=e.pauseIcon=void 0,e.pauseIcon='\n<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pause" class="svg-inline--fa fa-pause fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"></path></svg>\n',e.playIcon='\n<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"></path></svg>\n',e.resetIcon='\n<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="redo-alt" class="svg-inline--fa fa-redo-alt fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"></path></svg>'},467:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScatterWidget=void 0;var i=n(96);Object.defineProperty(e,"ScatterWidget",{enumerable:!0,get:function(){return i.ScatterWidget}})},96:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ScatterWidget=void 0;var a=o(n(212)),s=n(681),c=n(148),u=n(886),l=n(28);n(252);var d=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.clock=new a.Clock,this.pointsBuffers=[],this.minPointSize=.02,this.width=e,this.height=n,this.addContainerElement(t),this.addCanvas(),this.addScene(),this.addRenderer(),this.addControls()}return t.prototype.constructPlot=function(){this.colMeans=s.getColMeans(this.dataset),this.pointColours=this.coloursToBufferAttribute(this.mapping.colour);var t=new a.BufferGeometry,e=Math.pow(this.dataset.length,-1/3),n=this.getShaderOpts(e,this.dim),i=new a.ShaderMaterial(n),r=this.getPointsBuffer(0,this.config.center);t.setAttribute("position",r),this.config.cacheFrames&&this.pointsBuffers.push(r),this.points=new a.Points(t,i),this.points.geometry.setAttribute("color",this.pointColours),this.scene.add(this.points);var o=new a.BufferGeometry,c=new a.LineBasicMaterial({color:0,linewidth:1}),u=this.getAxisLinesBuffer(0);o.setAttribute("position",u),this.axisSegments=new a.LineSegments(o,c),this.scene.add(this.axisSegments),this.orbitControls=this.addOrbitControls(this.camera,this.renderer.domElement,this.dim),this.clock=new a.Clock,this.time=0,this.oldFrame=-1,this.isPaused=!1},t.prototype.resize=function(t,e){var n=t/e;this.canvas.width=t,this.canvas.height=e,3==this.dim?this.camera.aspect=n:(this.camera.left=-1*n,this.camera.right=1*n,this.camera.top=1,this.camera.bottom=-1),this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},t.prototype.renderValue=function(t){this.config=t.config,this.dataset=t.dataset,this.projectionMatrices=t.projectionMatrices,this.dim=t.projectionMatrices[0][0].length,3==this.dim?this.multiply=s.multiply3:this.multiply=s.multiply2,this.addCamera(this.dim),this.mapping=t.mapping,this.constructPlot(),this.animate()},t.prototype.addContainerElement=function(t){t.className="scatterWidgetContainer",this.container=t},t.prototype.addScene=function(){var t=new a.Scene;t.background=new a.Color(268435455);var e=new a.AmbientLight(4210752);t.add(e),this.scene=t},t.prototype.addCanvas=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.id=this.container.id+"-canvas",t.className="scatterWidgetCanvas",this.container.appendChild(t),this.canvas=t},t.prototype.addCamera=function(t){var e,n=this.width/this.height;(e=3==t?new a.PerspectiveCamera(45,n,.01,1e3):new a.OrthographicCamera(-1*n,1*n,1,-1,-1e3,1e3)).position.setZ(4),this.camera=e},t.prototype.addRenderer=function(){var t=new a.WebGLRenderer({canvas:this.canvas});t.setPixelRatio(window.devicePixelRatio),t.setSize(this.width,this.height),this.renderer=t},t.prototype.addOrbitControls=function(t,e,n){var i=new u.OrbitControls(this.camera,this.renderer.domElement);return 2==this.dim&&(i.enableRotate=!1,i.enablePan=!0,i.mouseButtons={LEFT:a.MOUSE.PAN,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN}),i},t.prototype.getShaderOpts=function(t,e){return 2==e?{uniforms:{size:{value:Math.max(t,this.minPointSize)},zoom:{value:this.camera.zoom}},vertexShader:c.VERTEX_SHADER_2D,fragmentShader:c.FRAGMENT_SHADER}:{uniforms:{size:{value:Math.max(t,this.minPointSize)}},vertexShader:c.VERTEX_SHADER_3D,fragmentShader:c.FRAGMENT_SHADER}},t.prototype.getPointsBuffer=function(t,e){var n=this.multiply(this.dataset,this.projectionMatrices[t]);if(e){var i=this.multiply(this.colMeans,this.projectionMatrices[t]);n=s.centerColumns(n,i)}var r=new Float32Array([].concat.apply([],n));return new a.BufferAttribute(r,3)},t.prototype.getAxisLinesBuffer=function(t){var e,n=this.projectionMatrices[t];return 3==this.dim?e=n.map((function(t){return[0,0,0].concat(t)})):2==this.dim&&(e=n.map((function(t){return[0,0,0].concat(t).concat([0])}))),new a.BufferAttribute(new Float32Array([].concat.apply([],e)),3)},t.prototype.coloursToBufferAttribute=function(t){var e=new a.Color,n=new Float32Array(3*this.dataset.length);if(t.length>0)for(var i=0,r=0;r<t.length;r++)i=3*r,e.set(t[r]),n[i]=e.r,n[i+1]=e.g,n[i+2]=e.b;return new a.BufferAttribute(n,3)},t.prototype.addControls=function(){var t=this,e=document.createElement("button");e.innerHTML=l.pauseIcon,e.className="playPauseButton",e.onclick=function(){return t.setIsPaused(!t.getIsPaused())},this.container.appendChild(e);var n=document.createElement("button");n.innerHTML=l.resetIcon,n.className="resetButton",n.onclick=function(){return t.resetClock()},this.container.appendChild(n)},t.prototype.animate=function(){var t=this,e=this.clock.getDelta();this.getIsPaused()||(this.time+=e),this.time>=this.config.duration&&(this.time=0);var n=Math.floor(this.time*this.config.fps);if(n!=this.oldFrame){var i=void 0;null==this.pointsBuffers[n]?(i=this.getPointsBuffer(n,this.config.center),this.config.cacheFrames&&(this.pointsBuffers[n]=i)):i=this.pointsBuffers[n],this.points.geometry.setAttribute("position",i),this.points.geometry.attributes.position.needsUpdate=!0,this.axisSegments.geometry.setAttribute("position",this.getAxisLinesBuffer(n)),this.axisSegments.geometry.attributes.position.needsUpdate=!0,this.oldFrame=n}2==this.dim&&(this.points.material.uniforms.zoom.value=this.camera.zoom),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return t.animate()}))},t.prototype.getIsPaused=function(){return this.isPaused},t.prototype.setIsPaused=function(t){this.isPaused=t;var e=this.container.querySelector(".playPauseButton");t?e.innerHTML=l.playIcon:(this.animate(),e.innerHTML=l.pauseIcon)},t.prototype.resetClock=function(){this.time=0},t}();e.ScatterWidget=d},148:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VERTEX_SHADER_2D=e.VERTEX_SHADER_3D=e.FRAGMENT_SHADER=void 0,e.FRAGMENT_SHADER="\nvarying float vSize;\nvarying vec3 vColor;\n\nvoid main(){\n    gl_FragColor = vec4( vColor, 1.0 );\n\n    // make points circular\n    float distance = length(2.0 * gl_PointCoord - 1.0);\n    if (distance > 1.0) {\n        discard;\n    }\n}\n",e.VERTEX_SHADER_3D="\nuniform float size;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main(){\n    vColor=color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n    gl_PointSize = 200.0 * size / -mvPosition.z;\n}\n",e.VERTEX_SHADER_2D="\nuniform float size;\nuniform float zoom;\n\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main(){\n    vColor=color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n    gl_PointSize = 100.0 * size * sqrt(zoom);\n}\n"},681:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.centerColumns=e.getColMeans=e.multiply2=e.multiply3=void 0,e.multiply3=function(t,e){for(var n=t.length,i=t[0].length,r=new Array(n),o=0;o<n;++o){var a=new Array(3);r[o]=a;for(var s=t[o],c=0;c<3;++c){for(var u=0,l=0;l<i;++l)u+=s[l]*e[l][c];a[c]=u}}return r},e.multiply2=function(t,e){for(var n=t.length,i=t[0].length,r=new Array(n),o=0;o<n;++o){var a=new Array(3);r[o]=a;for(var s=t[o],c=0;c<2;++c){for(var u=0,l=0;l<i;++l)u+=s[l]*e[l][c];a[c]=u}a[2]=0}return r},e.getColMeans=function(t){var e=t.length;return[t.reduce((function(t,e){return t.map((function(t,n){return t+e[n]}))})).map((function(t){return t/e}))]},e.centerColumns=function(t,e){return t.map((function(t){return t.map((function(t,n){return t-e[0][n]}))}))}}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={id:t,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,n,r,o)=>{if(!n){var a=1/0;for(u=0;u<t.length;u++){for(var[n,r,o]=t[u],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((t=>i.O[t](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));s&&(t.splice(u--,1),e=r())}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,r,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={499:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var r,o,[a,s,c]=n,u=0;for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(c)var l=c(i);for(e&&e(n);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[a[u]]=0;return i.O(l)},n=self.webpackChunkscatter_widget=self.webpackChunkscatter_widget||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=i.O(void 0,[841],(()=>i(467)));r=i.O(r),scatter_widget=r})();